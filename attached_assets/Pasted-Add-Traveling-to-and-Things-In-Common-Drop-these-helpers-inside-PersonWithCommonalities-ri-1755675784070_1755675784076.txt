Add “Traveling to …” and “# Things In Common”

Drop these helpers inside PersonWithCommonalities, right after const locationInfo = getCurrentLocation();:

// --- NEW: count + list the top common items
const countInCommon =
  (compatibilityData?.sharedInterests?.length || 0) +
  (compatibilityData?.sharedActivities?.length || 0) +
  (compatibilityData?.sharedEvents?.length || 0);

const topCommon: string[] = [
  ...(compatibilityData?.sharedInterests ?? []),
  ...(compatibilityData?.sharedActivities ?? []),
  ...((compatibilityData?.sharedEvents ?? []).map((e: any) => e?.title).filter(Boolean)),
].slice(0, 3);

// --- NEW: figure out an upcoming/active destination
const getTravelBlurb = () => {
  const plans = Array.isArray(travelPlans) ? (travelPlans as any[]) : [];

  const active = plans.find(p => p?.status === 'active');
  if (active) {
    const city = active.destinationCity || active.destination?.split(',')[0];
    if (city && city !== locationInfo.hometown) return `Traveling now: ${city}`;
  }

  const upcoming = plans
    .filter(p => p?.status === 'upcoming')
    .sort((a, b) => new Date(a.startDate || 0).getTime() - new Date(b.startDate || 0).getTime())[0];

  if (upcoming) {
    const city = upcoming.destinationCity || upcoming.destination?.split(',')[0];
    if (city && city !== locationInfo.hometown) return `Next trip: ${city}`;
  }

  return null;
};

const travelBlurb = getTravelBlurb();


Now, in the Bottom Section (inside the “non-self” return), right under the “Stats” block, add this:

{/* NEW: Traveling to / Next trip */}
{travelBlurb && (
  <div className="mb-2">
    <p className="text-gray-700 dark:text-gray-300 text-sm">{travelBlurb}</p>
  </div>
)}

{/* NEW: Things in common */}
{countInCommon > 0 && (
  <div className="mb-2">
    <p className="text-gray-700 dark:text-gray-300 text-sm">
      <span className="font-semibold">{countInCommon} Things In Common:</span>{' '}
      {topCommon.join(' • ')}
    </p>
  </div>
)}


(If you also want those lines on your own card, paste the same block into the “self” branch too.)

2) Fix: Clicking a card opens your profile instead of their profile

This almost always comes from routing: your /profile page is rendering the signed-in user and ignoring the :id param. Make sure your routes are split like this (Wouter example):

// in your router
<Route path="/profile" component={ProfilePage /* current user */} />

<Route path="/profile/:id">
  {(params) => <PublicProfilePage userId={Number(params.id)} />}
</Route>


And in PublicProfilePage, use the param to fetch the other user:

import { useRoute } from "wouter";
import { useQuery } from "@tanstack/react-query";

export default function PublicProfilePage() {
  const [, params] = useRoute("/profile/:id");
  const userId = Number(params?.id);

  const { data: user } = useQuery({
    queryKey: [`/api/users/${userId}`],
    enabled: Number.isFinite(userId),
  });

  // ...render "user" (NOT currentUser)
}


Finally, your card navigation is fine, but let’s make it explicit and bullet-proof:

const handleAvatarClick = (e: React.MouseEvent) => {
  e.stopPropagation();
  setLocation(`/profile/${person.id}`); // must match the /profile/:id route
};

const handleCardClick = () => {
  if (onPersonClick) onPersonClick(person);
  else setLocation(`/profile/${person.id}`); // also must match the route above
};


If your app actually uses a different public route (e.g. /u/:username), swap the path builder in both places to match your real route. The important bit is: the profile page you land on must read the :id (or :username) param and fetch that user, not currentUser.