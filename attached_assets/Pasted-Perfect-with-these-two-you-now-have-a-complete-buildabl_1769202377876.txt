Perfect — with these two, you now have a complete, buildable API contract for the mobile app. These fill the two biggest “guessing traps” (Discovery list + DM thread).

Here’s the final add-on block to paste into your Replit prompt (it plugs into the appendix I gave you earlier):

APPENDIX CONTINUED: DISCOVERY + DM THREAD (REAL SHAPES)
Discovery grid: GET /api/users (Home → user cards)

Use this response shape for the Home discovery grid. The list can contain locals, travelers, and businesses in one feed.

[
  {
    "id": 45,
    "username": "traveler_jane",
    "name": "Jane Doe",
    "userType": "traveler",
    "bio": "Digital nomad exploring the world one city at a time",
    "hometownCity": "Austin",
    "hometownState": "Texas",
    "hometownCountry": "United States",
    "destinationCity": "Los Angeles",
    "destinationState": "California",
    "destinationCountry": "United States",
    "profileImage": "https://storage.googleapis.com/...",
    "interests": ["Photography", "Food & Dining", "Arts & Music"],
    "isCurrentlyTraveling": true,
    "travelDestination": "Los Angeles",
    "gender": "female",
    "age": 28,
    "ageVisible": true,
    "languagesSpoken": ["English", "French"],
    "onlineStatus": "online",
    "isActive": true
  },
  {
    "id": 67,
    "username": "local_mike",
    "name": "Mike Johnson",
    "userType": "local",
    "bio": "Born and raised in LA. Ask me about hidden gems!",
    "hometownCity": "Los Angeles",
    "hometownState": "California",
    "hometownCountry": "United States",
    "destinationCity": null,
    "destinationState": null,
    "destinationCountry": null,
    "profileImage": null,
    "interests": ["Sports & Fitness", "Food & Dining", "Nightlife"],
    "isCurrentlyTraveling": false,
    "travelDestination": null,
    "gender": "male",
    "age": 35,
    "ageVisible": true,
    "languagesSpoken": ["English", "Spanish"],
    "onlineStatus": "offline",
    "isActive": true
  },
  {
    "id": 89,
    "username": "cafe_downtown",
    "name": "Downtown Cafe",
    "userType": "business",
    "bio": "Best coffee and pastries in DTLA since 2015",
    "hometownCity": "Los Angeles",
    "hometownState": "California",
    "hometownCountry": "United States",
    "profileImage": "https://...",
    "interests": ["Food & Dining"],
    "streetAddress": "123 Main St",
    "phoneNumber": "+1-555-123-4567",
    "websiteUrl": "www.downtowncafe.com",
    "isActive": true
  }
]


Discovery query parameters:

location (supports metro consolidation server-side)

userType = local | traveler | business

gender = male | female | non-binary

minAge, maxAge

interests (comma-separated)

search (name/username/bio)

UI rules:

For business cards, show: name + bio + address/website button (if present). Hide traveler-specific fields.

For non-business, show:

“Nearby Local • hometownCity” always

traveler line only if isCurrentlyTraveling === true

If ageVisible === false, hide age everywhere.

DM thread: GET /api/messages/:userId (Chat screen)

Use this exact shape for message rendering (bubbles, replies, reactions, edited label, read receipts).

[
  {
    "id": 789,
    "senderId": 45,
    "receiverId": 2,
    "content": "Hey! Are you free for coffee tomorrow?",
    "messageType": "text",
    "isRead": true,
    "isEdited": false,
    "reactions": null,
    "replyToId": null,
    "repliedMessage": null,
    "createdAt": "2024-01-15T14:30:00Z",
    "updatedAt": "2024-01-15T14:30:00Z",
    "sender": {
      "id": 45,
      "username": "traveler_jane",
      "name": "Jane Doe",
      "profileImage": "https://...",
      "onlineStatus": "online"
    },
    "receiver": {
      "id": 2,
      "username": "nearbytrav",
      "name": "John Smith",
      "profileImage": "https://...",
      "onlineStatus": "online"
    }
  }
]


Chat UI rules:

Bubble side is determined by senderId === currentUser.id

Show “(edited)” if isEdited === true

Show reaction bar if reactions is non-null and non-empty

If replyToId exists, show repliedMessage.content preview above bubble

Show read receipts based on isRead for messages sent by current user

Parse timestamps from UTC (Z) but display in device local time

Related endpoints:

POST /api/messages/:userId/mark-read (call when opening thread + when app becomes active in thread)

GET /api/messages/:userId/unread-count (tab badge)

One small but important spec tweak (so builders don’t screw it up)

Add this sentence:

Null-handling is required: profileImage, destinationCity, reactions, and repliedMessage may be null. UI must gracefully render fallbacks (initials avatar, hidden destination line, no reactions UI, etc.).

You’re now “ready-ready”

With the contract you’ve provided (auth, users, search, conversations, dm thread, chatrooms, events, plus chatroom behavior), a Replit Expo/RN project can be scaffolded without inventing shapes.

If you want the last 2% that prevents painful refactors: paste one sample response for:

GET /api/travel-plans/:userId

GET /api/events/:id (if you have a detail endpoint; if not, say events list is used for detail)

But even without those, you can start the iOS project confidently now.