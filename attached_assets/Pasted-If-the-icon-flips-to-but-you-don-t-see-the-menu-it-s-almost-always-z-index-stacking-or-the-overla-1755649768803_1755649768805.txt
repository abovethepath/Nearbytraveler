If the icon flips to âŒ but you donâ€™t see the menu, itâ€™s almost always z-index/stacking or the overlay being positioned under the sticky header. Easiest, bullet-proof fix: render the mobile menu in a portal to document.body and anchor it just below your header height (h-20 â†’ top-20).

Drop this in:

import React, { useState, useEffect } from "react";
import { Link, useLocation } from "wouter";
import { Button } from "@/components/ui/button";
import { Menu, X } from "lucide-react";
import { createPortal } from "react-dom";

function MobileMenu({
  open,
  onClose,
  navItems,
  location,
  setLocation,
}: {
  open: boolean;
  onClose: () => void;
  navItems: { path: string; label: string; icon: string }[];
  location: string;
  setLocation: (p: string) => void;
}) {
  if (!open) return null;

  // Optional: lock body scroll while open
  useEffect(() => {
    const prev = document.body.style.overflow;
    document.body.style.overflow = "hidden";
    return () => { document.body.style.overflow = prev; };
  }, []);

  const menu = (
    <div
      id="mobile-menu"
      className="
        block md:hidden fixed inset-x-0 top-20 z-[100]
        bg-white dark:bg-black border-b border-gray-200 dark:border-gray-800
        shadow-lg
      "
      role="dialog"
      aria-modal="true"
    >
      <div className="px-4 py-6 space-y-4 max-h-[calc(100vh-5rem)] overflow-y-auto">
        {navItems.map((item) => (
          <Link
            key={item.path}
            href={item.path}
            className={`block py-3 px-4 rounded-lg text-lg font-medium transition-colors ${
              location === item.path
                ? "bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400"
                : "text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800"
            }`}
            onClick={() => {
              onClose();
              setLocation(item.path);
            }}
          >
            <span className="mr-3">{item.icon}</span>
            {item.label}
          </Link>
        ))}

        <button
          onClick={() => { setLocation("/donate"); onClose(); }}
          className="w-full mt-4 py-3 px-4 rounded-lg text-white font-medium"
          style={{ backgroundColor: "#10b981" }}
        >
          Donate
        </button>
      </div>
    </div>
  );

  return createPortal(menu, document.body);
}

export default function Navbar() {
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const [location, setLocation] = useLocation();

  // Auto-close on route change
  useEffect(() => { setIsMobileMenuOpen(false); }, [location]);

  const navItems = [
    { path: "/", label: "Home", icon: "ğŸ " },
    { path: "/discover", label: "Cities", icon: "ğŸŒ" },
    { path: "/events", label: "Events", icon: "ğŸ“…" },
    { path: "/match-in-city", label: "City Match", icon: "ğŸ¯" },
    { path: "/connect", label: "Connect", icon: "ğŸ’" },
    { path: "/messages", label: "Messages", icon: "ğŸ’¬" },
    { path: "/profile", label: "Profile", icon: "ğŸ‘¤" },
  ];

  return (
    <>
      <header className="bg-white dark:bg-black shadow-sm sticky top-0 z-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-20 py-1">
            {/* Logo */}
            <div className="flex items-center">
              {/* your logo here */}
            </div>

            <div className="flex items-center space-x-8 ml-auto">
              {/* Desktop nav */}
              <nav className="hidden md:flex space-x-6">
                {navItems.map((item) => (
                  <Link
                    key={item.path}
                    href={item.path}
                    className={`transition-colors font-medium hover:underline ${
                      location === item.path
                        ? "text-gray-900 dark:text-white font-semibold"
                        : "text-gray-700 dark:text-white hover:text-blue-600"
                    }`}
                  >
                    {item.label}
                  </Link>
                ))}
              </nav>

              {/* Hamburger */}
              <Button
                variant="ghost"
                className="md:hidden h-12 w-12 p-0 touch-manipulation"
                style={{ minHeight: "48px", minWidth: "48px" }}
                onClick={() => setIsMobileMenuOpen((o) => o ^ true)} // functional toggle
                aria-controls="mobile-menu"
                aria-label={isMobileMenuOpen ? "Close mobile menu" : "Open mobile menu"}
                aria-expanded={isMobileMenuOpen}
              >
                {isMobileMenuOpen ? <X className="h-7 w-7" /> : <Menu className="h-7 w-7" />}
              </Button>
            </div>
          </div>
        </div>
      </header>

      {/* Render the mobile menu OUTSIDE the header via portal */}
      <MobileMenu
        open={isMobileMenuOpen}
        onClose={() => setIsMobileMenuOpen(false)}
        navItems={navItems}
        location={location}
        setLocation={setLocation}
      />
    </>
  );
}