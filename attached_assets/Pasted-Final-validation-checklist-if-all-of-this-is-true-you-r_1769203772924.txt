Final validation checklist (if all of this is true, you’re done)
1) Navigation consistency

Every place in the prompt that mentions tabs matches your FINAL structure:

Regular: Home / Events / Chatrooms / Messages / Profile (+ FAB)

Business: Dashboard / Deals / Messages / Search / Profile (+ FAB)

No leftover “Search tab” or “Messages second tab” references anywhere.

2) Discovery compatibility (your biggest hidden gotcha)

If you want “Things in Common / compatibilityScore / sharedInterests” on the Home grid, then one of these must be explicitly true:

Home grid is powered by GET /api/search-users (with default filters), OR

GET /api/users was extended to include compatibility fields, OR

You added a batch “compatibility” endpoint.

If your fix was “Home uses /api/search-users for compatibility,” make sure the prompt says that clearly, otherwise Replit will still build Home off /api/users and the badge will be fake.

3) City endpoints are truly canonical

The prompt names one canonical city endpoint: GET /api/cities/:city/overview

Any other city endpoint name is either removed or explicitly labeled as alias/deprecated.

4) City stats semantics are defined

Make sure your definitions are explicit and not ambiguous:

localCount = users whose hometownCity == city

travelerCount = users with upcoming/active trips to destinationCity == city (endDate ≥ today)

businessCount = business users whose hometownCity == city

eventCount = events with city == city (optionally “upcoming only” — define it)

5) Deals for regular users are real and wired

For locals/travelers, your prompt should now specify:

Where deals show up (City Home + optionally Events tab)

Which endpoint returns them (and it must exist)

A sample response shape

Any “save/redeem” behaviors (even if v1 is just “open website”)

6) Geolocation stays Apple-safe (and sane scope)

Your “5 rules” should include these minimums:

Opt-in toggle (OFF by default)

Foreground-only updates (no background tracking)

Update frequency + “stale after X minutes” behavior

Never display exact coordinates publicly (only distance/approx)

Clear UX for “turn off location sharing” and what that changes

Also ensure you only request NSLocationWhenInUse (not Always) since you’re not background tracking.

7) Friends-of-friends endpoints are not duplicated in UI

The prompt should clearly assign usage:

Discovery list: batch degrees

Profile badge: degree endpoint

“See mutuals” screen: mutual-connections list
Otherwise Replit will call all three everywhere and your app will feel slow.

The remaining “can still break even with a perfect prompt”

These aren’t prompt issues — they’re implementation landmines:

Cookie auth on React Native (most common failure)

Login succeeds, but /api/auth/user returns 401 → cookies not persisted/sent.

WebSocket auth

If your prompt still tells it to send connect.sid as a value, that may fail if the cookie is HttpOnly. Prefer: “WS uses cookie handshake; only fall back to x-user-id if your backend truly supports it.”

CORS + SameSite

If your server cookie is SameSite=Lax/Strict, native fetches can behave differently than browser.

If you want a true “line-by-line” review

Paste just these new sections you added (not the whole 1607 lines):

Deals endpoint + sample response

Nearby users endpoint query + sample response

City stats definitions

The single paragraph that explains “Home grid uses /api/search-users for compatibility”

With those four blocks, I can tell you immediately whether your prompt is now fully consistent with your backend contract or if any last contradictions remain.