Thanks for the snippet — this explains both failures. Your frontend is wired for a SPA “/signin” route + POST /api/auth/logout, but your server only exposes GET /api/login and no logout route. So:

The CTA “Sign in” likely does nothing because it navigates to /signin (client route) instead of hitting your server’s /api/login that actually sets the session.

The hamburger “Sign out” calls /api/auth/logout (from our earlier client code) but that endpoint doesn’t exist on the server → nothing happens (or it 404s).

Here’s the fastest set of fixes.

1) Server: add a real logout route + (optional) /signin helper

Add this to your server/routes.ts (or wherever you define routes):

// LOG OUT – destroy session and clear cookie
app.post("/api/auth/logout", (req, res) => {
  if (!req.session) return res.status(200).json({ ok: true }); // already logged out

  req.session.destroy((err) => {
    if (err) {
      console.error("Session destroy error:", err);
      // still try to clear cookie
    }
    // name must match your session cookie name (default: connect.sid)
    res.clearCookie("connect.sid");
    return res.status(200).json({ ok: true });
  });
});

// (Optional) SPA-friendly sign-in redirect
// If your CTA links to /signin (client route), you can let the client
// bounce to this API instead of hard-coding /api/login in the UI.
app.get("/api/auth/signin", (req, res) => {
  res.redirect("/api/login");
});


Keep your existing /api/login and /api/auth/user as-is.

Bonus sanity: if you’re on Replit over plain HTTP, make sure your express-session config doesn’t force cookie: { secure: true }, or the cookie won’t set. If you are behind a proxy, also set app.set('trust proxy', 1) and use sameSite: "lax" or "none" with secure: true appropriately.

2) Client: wire the Sign In CTA to actually hit the server

You have two clean options; pick one and make it consistent everywhere:

Option A: direct the CTA to the API route

// In your landing hero CTA:
<Button asChild>
  <a href="/api/login">Sign in</a>
</Button>


This does a full-page GET to your server, which logs in and redirects to “/”.

Option B: keep /signin page, but bounce to API
On your /signin route/component, the primary button should redirect:

// SignInPage.tsx
import { useEffect } from "react";

export default function SignInPage() {
  useEffect(() => {
    // immediately kick to server login (or show a button that does this)
    window.location.href = "/api/login";
  }, []);
  return null; // or a loading state
}


Or, if you kept the helper above:

window.location.href = "/api/auth/signin";

3) Client: fix the hamburger “Sign out”

Now that the server has /api/auth/logout, wire your menu item to call it and then clear client state. In shadcn menus, prefer onSelect:

import { DropdownMenuItem } from "@/components/ui/dropdown-menu";
import { useQueryClient } from "@tanstack/react-query";
import { useLocation } from "wouter";
import { useAuth } from "@/App";
import { authStorage } from "@/lib/auth";
import { apiRequest } from "@/lib/queryClient";

function SignOutMenuItem({ closeMenu }: { closeMenu?: () => void }) {
  const [, setLocation] = useLocation();
  const qc = useQueryClient();
  const { setUser } = useAuth();

  async function handleSignOut() {
    try {
      await apiRequest("POST", "/api/auth/logout").catch(() => {});
    } finally {
      authStorage.clear?.();
      qc.clear();
      setUser?.(null);
      setLocation("/"); // or "/signin"
    }
  }

  return (
    <DropdownMenuItem
      onSelect={(e) => {
        e.preventDefault();
        closeMenu?.();           // if inside a Sheet/Drawer, close it first
        setTimeout(handleSignOut, 0);
      }}
    >
      Sign out
    </DropdownMenuItem>
  );
}

4) Quick overlay/z-index sanity for the CTA

If it still doesn’t respond after rewiring, it’s likely an overlay:

In DevTools, hover the button; if another element highlights on top, add pointer-events-none to that overlay or bump the CTA with z-50 relative.

5) SPA fallback (deep link safety)

If you’re serving a built SPA from Express on Replit, keep the catch-all so /signin reloads don’t 404:

app.use(express.static("dist"));
app.get("*", (_, res) => res.sendFile(path.join(__dirname, "dist", "index.html")));

TL;DR

Add POST /api/auth/logout on the server (destroy session + clear cookie).

Point your CTA to /api/login (or have /signin immediately redirect there).

Use onSelect for the menu sign-out and clear client caches/context after the API call.

Double-check session cookie settings on Replit so auth sticks.

If you paste your express-session setup here, I’ll sanity-check the cookie flags for Replit.