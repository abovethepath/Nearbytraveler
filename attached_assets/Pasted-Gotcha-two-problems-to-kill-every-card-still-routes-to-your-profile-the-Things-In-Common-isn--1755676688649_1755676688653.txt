Gotcha — two problems to kill:

every card still routes to your profile

the “Things In Common” isn’t showing on Discover

Here’s a tight set of fixes you can paste in.

1) Make cards open their profile (not yours)
A) Route order + param usage (wouter)

Put the param route before the plain route and actually read the :id.

import { Route, Switch } from "wouter";

// App routes
<Switch>
  {/* Public profile by ID */}
  <Route path="/profile/:id">
    {(params) => <PublicProfilePage userId={Number(params.id)} />}
  </Route>

  {/* Your own profile */}
  <Route path="/profile" component={MyProfilePage} />
</Switch>


And in PublicProfilePage, fetch by the param, not from AuthContext:

import { useQuery } from "@tanstack/react-query";

export default function PublicProfilePage({ userId }: { userId: number }) {
  const { data: user, isLoading } = useQuery({
    queryKey: [`/api/users/${userId}`],
    enabled: Number.isFinite(userId),
  });

  if (isLoading) return <div />;

  // render the other user's profile...
}

B) Force the card to build the right URL and stop parent handlers

In your Discover/People widget:

// always build the same target
const profileHref = `/profile/${person.id}`;

const handleCardClick = (e?: React.MouseEvent) => {
  e?.stopPropagation();
  setLocation(profileHref);
};

const handleAvatarClick = (e: React.MouseEvent) => {
  e.stopPropagation();
  setLocation(profileHref);
};


If any parent container has an onClick that navigates to /profile, neuter it with:

<div onClickCapture={(e) => e.stopPropagation()}>
  {/* the grid of cards */}
</div>


(That guards against a parent “sheet/profile” click handler hijacking your taps.)

2) Show “Things In Common” on the card

A common reason it never appears: the compatibility query is gated by that isLoading timer. Remove that gate so it actually runs, and render the count + preview.

Inside PersonWithCommonalities:

// ✅ Do NOT gate on your local isLoading flag
const enabledCompat =
  !!currentUserId &&
  !!person.id &&
  Number(currentUserId) !== Number(person.id);

const { data: compatibilityData } = useQuery({
  queryKey: [`/api/compatibility/${currentUserId}/${person.id}`],
  enabled: enabledCompat,
  staleTime: 5 * 60 * 1000,
});


Compute a count + a short preview:

const sharedInterests = compatibilityData?.sharedInterests ?? [];
const sharedActivities = compatibilityData?.sharedActivities ?? [];
const sharedEvents = (compatibilityData?.sharedEvents ?? []).map((e: any) => e?.title).filter(Boolean);

const countInCommon = sharedInterests.length + sharedActivities.length + sharedEvents.length;
const topCommon = [...sharedInterests, ...sharedActivities, ...sharedEvents].slice(0, 3);


Render it in the bottom section (for others + for your own card if you want it there too):

{countInCommon > 0 && (
  <div className="mt-2">
    <p className="text-sm text-gray-700 dark:text-gray-300">
      <span className="font-semibold">{countInCommon} Things In Common:</span>{" "}
      {topCommon.join(" • ")}
    </p>
  </div>
)}


Optional: also drop a small pill next to the hometown row:

{countInCommon > 0 && (
  <span className="ml-2 bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">
    {countInCommon} in common
  </span>
)}

3) Quick sanity checks (worth 60 seconds)

Hit one card and watch the URL: it must be /profile/<theirId>.

On the public profile page, log the userId you fetched to confirm it matches the URL param.

In the Discover grid, console.log(person.id, currentUser?.id)—if they’re equal for everyone, your people array is wrong (all rows are “you”).

If you paste your PublicProfilePage (or your router snippet) I’ll align it exactly, but the changes above usually fix both the misrouting and the missing “in common.”