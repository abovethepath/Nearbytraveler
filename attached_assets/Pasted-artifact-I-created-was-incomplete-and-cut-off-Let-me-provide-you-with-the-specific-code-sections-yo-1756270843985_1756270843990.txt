artifact I created was incomplete and cut off. Let me provide you with the specific code sections you need to replace in your existing Home component to implement the changes you requested.
First, add this function near the top of your component (after the other helper functions):
javascript// Function to calculate things in common between current user and another user
const getThingsInCommon = (otherUser: any) => {
  if (!effectiveUser) return 0;
  
  let commonCount = 0;
  
  // Compare interests
  const currentUserInterests = effectiveUser.interests || [];
  const otherUserInterests = otherUser.interests || [];
  const commonInterests = currentUserInterests.filter(interest => 
    otherUserInterests.some(other => other.toLowerCase() === interest.toLowerCase())
  );
  commonCount += commonInterests.length;
  
  // Compare activities
  const currentUserActivities = [...(effectiveUser.localActivities || []), ...(effectiveUser.preferredActivities || [])];
  const otherUserActivities = [...(otherUser.localActivities || []), ...(otherUser.preferredActivities || [])];
  const commonActivities = currentUserActivities.filter(activity => 
    otherUserActivities.some(other => other.toLowerCase() === activity.toLowerCase())
  );
  commonCount += commonActivities.length;
  
  // Compare travel style
  const currentUserTravelStyle = effectiveUser.travelStyle || [];
  const otherUserTravelStyle = otherUser.travelStyle || [];
  const commonTravelStyle = currentUserTravelStyle.filter(style => 
    otherUserTravelStyle.some(other => other.toLowerCase() === style.toLowerCase())
  );
  commonCount += commonTravelStyle.length;
  
  // Compare languages
  const currentUserLanguages = effectiveUser.languagesSpoken || [];
  const otherUserLanguages = otherUser.languagesSpoken || [];
  const commonLanguages = currentUserLanguages.filter(language => 
    otherUserLanguages.some(other => other.toLowerCase() === language.toLowerCase())
  );
  commonCount += commonLanguages.length;
  
  return commonCount;
};
Next, replace your Events Section (find the section with LocationSortedEvents) with this enhanced version:
javascript{/* Events Section - Enhanced with Location Details */}
<div className="bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 dark:from-purple-900/20 dark:via-blue-900/20 dark:to-indigo-900/20 rounded-2xl p-6 border border-purple-100 dark:border-purple-800">
  <div className="flex items-center justify-between mb-6">
    <h2 className="text-xl font-bold text-gray-900 dark:text-white flex items-center">
      <Calendar className="w-5 h-5 mr-2 text-purple-600" />
      Events Near You
    </h2>
    <Button
      variant="outline"
      size="sm"
      onClick={() => setLocation('/events')}
      className="text-purple-600 border-purple-200 hover:bg-purple-50"
    >
      View All Events
    </Button>
  </div>
  
  {events.length > 0 ? (
    <div className="space-y-4">
      {events.slice(0, eventsDisplayCount).map((event: any) => (
        <Card 
          key={event.id}
          className="cursor-pointer hover:shadow-md transition-all duration-200 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-purple-100 dark:border-purple-800"
          onClick={() => setLocation(`/events/${event.id}`)}
        >
          <CardContent className="p-4">
            <div className="flex items-start gap-4">
              {/* Event Image */}
              {event.image && (
                <div className="w-16 h-16 flex-shrink-0 rounded-lg overflow-hidden">
                  <img 
                    src={event.image} 
                    alt={event.title}
                    className="w-full h-full object-cover"
                  />
                </div>
              )}
              
              {/* Event Details */}
              <div className="flex-1 min-w-0">
                <h3 className="font-semibold text-gray-900 dark:text-white mb-1 line-clamp-1">
                  {event.title}
                </h3>
                
                {/* Date and Time */}
                <div className="flex items-center text-sm text-gray-600 dark:text-gray-400 mb-2">
                  <Calendar className="w-4 h-4 mr-1" />
                  {format(new Date(event.date), 'MMM dd, yyyy')}
                  {event.time && (
                    <span className="ml-2">‚Ä¢ {event.time}</span>
                  )}
                </div>
                
                {/* Location Details */}
                <div className="flex items-start text-sm text-gray-600 dark:text-gray-400 mb-2">
                  <MapPin className="w-4 h-4 mr-1 mt-0.5 flex-shrink-0" />
                  <div className="min-w-0">
                    {/* Street Address */}
                    {event.address && (
                      <div className="truncate">{event.address}</div>
                    )}
                    {/* City, State */}
                    <div className="truncate">
                      {event.city && event.state ? `${event.city}, ${event.state}` : event.city || event.location}
                    </div>
                    {/* Venue Name if different from address */}
                    {event.venue && event.venue !== event.address && (
                      <div className="text-xs text-gray-500 dark:text-gray-500 truncate">
                        at {event.venue}
                      </div>
                    )}
                  </div>
                </div>
                
                {/* Event Description */}
                {event.description && (
                  <p className="text-sm text-gray-600 dark:text-gray-300 line-clamp-2 mb-2">
                    {event.description}
                  </p>
                )}
                
                {/* Event Tags/Categories */}
                {event.category && (
                  <div className="flex items-center gap-2">
                    <Badge className="bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200 text-xs">
                      {event.category}
                    </Badge>
                    {event.price && (
                      <Badge className="bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 text-xs">
                        {event.price === 0 || event.price === '0' ? 'Free' : `$${event.price}`}
                      </Badge>
                    )}
                  </div>
                )}
              </div>
              
              {/* Action Button */}
              <div className="flex-shrink-0">
                <Button
                  size="sm"
                  className="bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white"
                  onClick={(e) => {
                    e.stopPropagation();
                    setLocation(`/events/${event.id}`);
                  }}
                >
                  View Event
                </Button>
              </div>
            </div>
          </CardContent>
        </Card>
      ))}
    </div>
  ) : (
    <Card className="p-8 text-center bg-white/50 dark:bg-gray-800/50">
      <Calendar className="w-12 h-12 mx-auto text-gray-400 mb-4" />
      <h3 className="text-lg font-medium text-gray-900 dark:text-white mb-2">No Events Found</h3>
      <p className="text-gray-600 dark:text-gray-400">
        Check back later for upcoming events in your area.
      </p>
    </Card>
  )}
  
  {/* Load More Events Button */}
  {events.length > eventsDisplayCount && (
    <div className="text-center mt-6">
      <Button
        variant="outline"
        onClick={() => setEventsDisplayCount(prev => prev + 3)}
        className="text-purple-600 border-purple-200 hover:bg-purple-50"
      >
        Load More Events ({events.length - eventsDisplayCount} remaining)
      </Button>
    </div>
  )}
</div>
Finally, update your people discovery sections. Replace the mobile grid section:
javascript{/* Mobile grid: 2 cols on very small, 3 cols at ‚â•640px */}
<div className="sm:hidden">
  <div className="grid grid-cols-2 gap-3">
    {getSortedUsers(filteredUsers).slice(0, displayLimit).map((u: any) => {
      const thingsInCommon = getThingsInCommon(u);
      const isCurrentlyTraveling = u.isCurrentlyTraveling && u.travelDestination;
      
      return (
        <button
          key={u.id}
          onClick={() => setLocation(`/profile/${u.id}`)}
          className="group text-left rounded-xl border bg-white dark:bg-gray-800 p-2 hover:shadow-sm"
        >
          <div className="relative w-full aspect-[4/5] rounded-lg overflow-hidden bg-gray-100">
            {u.profileImage ? (
              <img
                src={u.profileImage}
                alt={u.username}
                className="h-full w-full object-cover"
                loading="lazy"
                onError={(e) => {
                  e.currentTarget.style.display = 'none';
                  e.currentTarget.nextElementSibling?.classList.remove('hidden');
                }}
              />
            ) : null}
            <div className={`${u.profileImage ? 'hidden' : ''} h-full w-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center`}>
              <span className="text-white font-bold text-lg">{u.username?.charAt(0)?.toUpperCase() || 'U'}</span>
            </div>
            
            {/* Travel Indicator */}
            {isCurrentlyTraveling && (
              <div className="absolute top-2 right-2 bg-blue-500 text-white rounded-full p-1">
                <Plane className="w-3 h-3" />
              </div>
            )}
          </div>
          <div className="mt-2 min-w-0 space-y-1">
            {/* Username */}
            <div className="text-sm font-semibold truncate text-gray-900 dark:text-white">
              @{u.username}
            </div>
            
            {/* Current Location or Hometown */}
            {isCurrentlyTraveling ? (
              <div className="text-xs text-blue-600 dark:text-blue-400 truncate flex items-center">
                <Plane className="w-3 h-3 mr-1" />
                {u.travelDestination}
              </div>
            ) : (
              <div className="text-xs text-gray-500 dark:text-gray-400 truncate">
                {u.hometownCity && u.hometownCountry
                  ? `${u.hometownCity}, ${u.hometownCountry.replace("United States", "USA")}`
                  : u.location || "Location not set"}
              </div>
            )}
            
            {/* Things in Common */}
            {thingsInCommon > 0 && (
              <div className="text-xs text-green-600 dark:text-green-400 truncate">
                {thingsInCommon} thing{thingsInCommon !== 1 ? 's' : ''} in common
              </div>
            )}
          </div>
        </button>
      );
    })}
  </div>
</div>
And update the desktop grid (change grid-cols-4 xl:grid-cols-5 to just grid-cols-4):
javascript{/* Desktop (‚â•1024px): force 4 across maximum */}
<div className="hidden lg:grid grid-cols-4 gap-4">
  {people.map((u: any) => {
    const thingsInCommon = getThingsInCommon(u);
    const isCurrentlyTraveling = u.isCurrentlyTraveling && u.travelDestination;
    
    return (
      <button
        key={u.id}
        onClick={() => setLocation(`/profile/${u.id}`)}
        className="group text-left rounded-xl border bg-white dark:bg-gray-800 p-3 hover:shadow-sm"
      >
        <div className="relative w-full aspect-[4/5] rounded-lg overflow-hidden bg-gray-100">
          {u.profileImage ? (
            <img 
              src={u.profileImage} 
              alt={u.username} 
              className="h-full w-full object-cover"
              onError={(e) => {
                e.currentTarget.style.display = 'none';
                e.currentTarget.nextElementSibling?.classList.remove('hidden');
              }}
            />
          ) : null}
          <div className={`${u.profileImage ? 'hidden' : ''} h-full w-full bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center`}>
            <span className="text-white font-bold text-xl">{u.username?.charAt(0)?.toUpperCase() || 'U'}</span>
          </div>
          
          {/* Travel Indicator */}
          {isCurrentlyTraveling && (
            <div className="absolute top-2 right-2 bg-blue-500 text-white rounded-full p-1.5">
              <Plane className="w-4 h-4" />
            </div>
          )}
        </div>
        <div className="mt-3 min-w-0 space-y-1">
          {/* Username */}
          <div className="text-sm font-semibold truncate text-gray-900 dark:text-white">
            @{u.username}
          </div>
          
          {/* Current Location or Hometown */}
          {isCurrentlyTraveling ? (
            <div className="text-xs text-blue-600 dark:text-blue-400 truncate flex items-center">
              <Plane className="w-3 h-3 mr-1" />
              Currently in {u.travelDestination}
            </div>
          ) : (
            <div className="text-xs text-gray-500 dark:text-gray-400 truncate">
              üìç {u.hometownCity && u.hometownCountry 
                ? `${u.hometownCity}, ${u.hometownCountry.replace("United States","USA")}` 
                : u.location || "Location not set"}
            </div>
          )}
          
          {/* Things in Common */}
          {thingsInCommon > 0 ? (
            <div className="text-xs text-green-600 dark:text-green-400 font-medium">
              ‚ú® {thingsInCommon} thing{thingsInCommon !== 1 ? 's' : ''} in common
            </div>
          ) : (
            <div className="text-xs text-gray-400 dark:text-gray-500">
              No common interests yet
            </div>
          )}
        </div>
      </button>
    );
  })}
</div>
Make sure to also import the Plane icon at the top with your other imports:
javascriptimport { Globe, Users, MapPin, Briefcase, Calendar, Filter, X, ChevronDown, ChevronRight, MessageCircle, Camera, Search, Store, Hash, Tag, AlertCircle, ArrowUpDown, Clock, Zap, Star, Coffee, Phone, Plane } from "lucide-react";