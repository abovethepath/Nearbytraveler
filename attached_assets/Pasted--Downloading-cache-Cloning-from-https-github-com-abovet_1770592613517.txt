==> Downloading cache...
==> Cloning from https://github.com/abovethepath/Nearbytraveler
==> Checking out commit 14dd2db129dcfda6cb0a151ab5882929bd596509 in branch main
Menu
==> Downloaded 284MB in 5s. Extraction took 6s.
==> Requesting Node.js version 20
==> Using Node.js version 20.20.0 via /opt/render/project/src/.nvmrc
==> Docs on specifying a Node.js version: https://render.com/docs/node-version
==> Running build command 'npm install --include=dev && npm run build'...
up to date, audited 992 packages in 2s
147 packages are looking for funding
  run `npm fund` for details
8 vulnerabilities (4 moderate, 4 high)
To address issues that do not require attention, run:
  npm audit fix
To address all issues (including breaking changes), run:
  npm audit fix --force
Run `npm audit` for details.
> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist
vite v6.4.1 building for production...
transforming...
âœ“ 3360 modules transformed.
rendering chunks...
computing gzip size...
../dist/public/index.html                                    4.74 kB â”‚ gzip:   1.51 kB
../dist/public/assets/couch_1756775792515-dcc1ScJ0.png       9.84 kB
../dist/public/assets/image_1756447354157-CUNcvnqq.png     135.34 kB
../dist/public/assets/image_1756765621788-9nrCk5Db.png     189.78 kB
../dist/public/assets/image_1756447587360-BfXnVT4s.png     213.11 kB
../dist/public/assets/image_1756447442403-KrdkP8-r.png     614.03 kB
../dist/public/assets/locals_1756777112458-B7VOCwLy.png    759.83 kB
../dist/public/assets/image_1756447721644-sF8h7gTq.png   1,150.37 kB
../dist/public/assets/event-photo-gP2XslEG.png           1,656.71 kB
../dist/public/assets/index-Dkn_64kG.css                   303.17 kB â”‚ gzip:  46.65 kB
../dist/public/assets/contentFilter-CYSxhNGR.js              1.50 kB â”‚ gzip:   0.75 kB
../dist/public/assets/index-DUYauZ5y.js                  3,073.25 kB â”‚ gzip: 766.94 kB
âœ“ built in 11.36s
(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
â–² [WARNING] Duplicate member "getUserByResetToken" in class body [duplicate-class-member]
    server/storage.ts:8923:8:
      8923 â”‚   async getUserByResetToken(token: string) {
           â•µ         ~~~~~~~~~~~~~~~~~~~
  The original member "getUserByResetToken" is here:
    server/storage.ts:579:8:
      579 â”‚   async getUserByResetToken(token: string): Promise<User | undefi...
          â•µ         ~~~~~~~~~~~~~~~~~~~
â–² [WARNING] Duplicate member "getUserTravelPreferences" in class body [duplicate-class-member]
    server/storage.ts:8930:8:
      8930 â”‚   async getUserTravelPreferences(userId: number): Promise<any> {
           â•µ         ~~~~~~~~~~~~~~~~~~~~~~~~
  The original member "getUserTravelPreferences" is here:
    server/storage.ts:3975:8:
      3975 â”‚   async getUserTravelPreferences(): Promise<any> { return undefi...
           â•µ         ~~~~~~~~~~~~~~~~~~~~~~~~
â–² [WARNING] Duplicate member "createUserTravelPreferences" in class body [duplicate-class-member]
    server/storage.ts:8944:8:
      8944 â”‚   async createUserTravelPreferences(preferences: any): Promise<a...
           â•µ         ~~~~~~~~~~~~~~~~~~~~~~~~~~~
  The original member "createUserTravelPreferences" is here:
    server/storage.ts:3974:8:
      3974 â”‚   async createUserTravelPreferences(): Promise<any> { return {}; }
           â•µ         ~~~~~~~~~~~~~~~~~~~~~~~~~~~
â–² [WARNING] Duplicate member "updateUserTravelPreferences" in class body [duplicate-class-member]
    server/storage.ts:8958:8:
      8958 â”‚   async updateUserTravelPreferences(userId: number, updates: any...
           â•µ         ~~~~~~~~~~~~~~~~~~~~~~~~~~~
  The original member "updateUserTravelPreferences" is here:
    server/storage.ts:3976:8:
      3976 â”‚   async updateUserTravelPreferences(): Promise<any> { return und...
           â•µ         ~~~~~~~~~~~~~~~~~~~~~~~~~~~
â–² [WARNING] Duplicate member "createInstagramPost" in class body [duplicate-class-member]
    server/storage.ts:9111:8:
      9111 â”‚   async createInstagramPost(data: InsertInstagramPost): Promise<...
           â•µ         ~~~~~~~~~~~~~~~~~~~
  The original member "createInstagramPost" is here:
    server/storage.ts:7897:8:
      7897 â”‚   async createInstagramPost(post: InsertInstagramPost): Promise<...
           â•µ         ~~~~~~~~~~~~~~~~~~~
â–² [WARNING] Duplicate member "getInstagramPosts" in class body [duplicate-class-member]
    server/storage.ts:9130:8:
      9130 â”‚   async getInstagramPosts(eventId?: number, userId?: number): Pr...
           â•µ         ~~~~~~~~~~~~~~~~~
  The original member "getInstagramPosts" is here:
    server/storage.ts:7907:8:
      7907 â”‚   async getInstagramPosts(eventId?: number, userId?: number): Pr...
           â•µ         ~~~~~~~~~~~~~~~~~
6 of 18 warnings shown (disable the message limit with --log-limit=0)
  dist/index.js  1.6mb âš ï¸
âš¡ Done in 92ms
==> Uploading build...
==> Uploaded in 14.2s. Compression took 5.8s
==> Build successful ðŸŽ‰
==> Deploying...
==> Setting WEB_CONCURRENCY=1 by default, based on available CPUs in the instance
==> Running 'npm start'
> rest-express@1.0.0 start
> node dist/index.js
The `fetchConnectionCache` option is deprecated (now always `true`)
ðŸ“± SMS Service: Twilio credentials not configured - SMS notifications disabled
Environment check: { BREVO_API_KEY: 'LOADED', NODE_ENV: 'production' }
ðŸš€ REGISTERING CRITICAL API ROUTES FIRST TO BYPASS VITE INTERCEPTION
âœ… CRITICAL API ROUTES REGISTERED BEFORE OTHER MIDDLEWARE
ðŸ”´ Redis URL check: {
  hasRedisUrl: true,
  urlPrefix: 'rediss://d...',
  nodeEnv: 'production'
}
ðŸ”´ Redis: Connecting to Redis for session storage...
ðŸª Session config: {
  isProduction: true,
  nodeEnv: 'production',
  replSlug: 'unset',
  hasRedis: true,
  cookieSecure: true
}
ðŸ”’ Trust proxy enabled for production/Replit
Starting server initialization...
Basic routes added, starting lazy route registration...
Loading minimal routes for startup...
Quick login fix temporarily disabled for deployment stability
Minimal routes registered successfully
Registering main API routes from routes.ts...
âš ï¸ Replit Auth: Skipping - not running on Replit (using password auth instead)
âœ… Replit Auth setup complete
âš ï¸ WebSocket: Running in single-instance mode (no Redis)
âœ… Main API routes registered successfully
ðŸš€ REGISTERING CRITICAL API ROUTES TO BYPASS VITE INTERCEPTION
ðŸš€ DEPLOYMENT FIX v3: Custom deployment setup preserving API routes...
ðŸ“¦ Static path: /opt/render/project/src/dist/public
âœ… DEPLOYMENT FIX v3: Custom setup complete - API routes preserved
11:13:49 PM [express] serving on port 10000
ðŸš€ Server successfully started on http://0.0.0.0:10000
ðŸ”„ Running initial travel status check...
âœ… Cache: Redis connected for API caching
âœ… Redis: Connected successfully - sessions will persist across restarts
âœ… Redis PubSub: Publisher connected (instance 1770592429374-wauska89l)
âœ… Redis PubSub: Subscriber connected (instance 1770592429374-wauska89l)
Checking travel status for 0 users with travel data
Travel status update completed for 0 unique users
âœ… Initial travel status check completed
âœ… Server started successfully with travel status monitoring enabled
âœ… Redis: Ready to accept commands
==> Your service is live ðŸŽ‰
==> 
==> ///////////////////////////////////////////////////////////
==> 
==> Available at your primary URL https://nearbytraveler.org + 2 more domains
==> 
==> ///////////////////////////////////////////////////////////
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
11:15:56 PM [express] GET /api/messages/2 304 in 845ms :: [{"id":159,"senderId":2,"receiverId":111,"câ€¦
Error fetching group chat: error: column "available_now_id" does not exist
    at file:///opt/render/project/src/node_modules/@neondatabase/serverless/index.mjs:1087:33
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (file:///opt/render/project/src/node_modules/drizzle-orm/neon-serverless/session.js:76:20)
    at async file:///opt/render/project/src/dist/index.js:36992:26 {
  length: 116,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '39',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
11:15:57 PM [express] GET /api/available-now/group-chat 500 in 606ms :: {"error":"Failed to fetch groâ€¦
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
11:15:57 PM [express] GET /api/available-now/my-group-chats 304 in 651ms :: {"chatrooms":[]}
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket
ðŸŸ¢ User nearbytrav (2) connected to chat WebSocket