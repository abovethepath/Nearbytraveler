Got you. If it keeps auto-logging instead of showing the Welcome Back form, something in your app is still redirecting to /api/login or silently creating a session. Here’s how to kill that behavior fast.

Quick fixes (do these now)

Search & remove any auto-login redirects
Find any client code doing this and delete it:

// BAD (remove anywhere you see it)
useEffect(() => { window.location.href = "/api/login"; }, []);
// or
navigate("/api/login")


Also grep for /api/auth/signin if you added that helper.

Disable any “auto-seed session” middleware on the server
If you have anything like this in Express, remove or gate it:

// BAD (remove)
app.use(async (req, _res, next) => {
  if (!req.session?.user) {
    const user = await storage.getUser("2");
    if (user) req.session.user = { id: user.id, username: user.username };
  }
  next();
});


If you really need it for dev, guard with an env:

if (process.env.DEMO_AUTO_LOGIN === "true") { /* ... */ }


…and set DEMO_AUTO_LOGIN=false on Replit.

Make sure your /signin page does NOT auto-redirect
Your Welcome Back page should just render a form and call POST /api/auth/login on submit—no useEffect redirects.

// routes/SignInPage.tsx (no auto-redirects!)
export default function SignInPage() {
  // ... form state ...
  async function handleLogin(e: React.FormEvent) {
    e.preventDefault();
    const res = await fetch("/api/auth/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      credentials: "include",
      body: JSON.stringify({ email, password }),
    });
    if (!res.ok) throw new Error("Invalid credentials");
    setLocation("/"); // only after successful login
  }
  return (/* your form UI */);
}


Don’t let your auth bootstrap force a redirect
If you have a global “auth gate”, ensure it doesn’t push to /api/login or something similar. It should only navigate to /signin when unauthenticated—and never from /signin itself.

// AuthGate or App bootstrap
useEffect(() => {
  let cancelled = false;
  (async () => {
    try {
      const me = await apiRequest("GET", "/api/auth/user");
      if (!cancelled) setUser(me);
    } catch {
      if (!cancelled) setUser(null);
      // Only redirect if we're not already on /signin
      if (location.pathname !== "/signin") setLocation("/signin");
    }
  })();
  return () => { cancelled = true; };
}, [location.pathname]);


Ensure the landing CTA actually goes to /signin

<Button asChild>
  <Link href="/signin">Sign in</Link>
</Button>


Clear any sticky session cookie while testing
If you’re already logged in, you’ll be bounced past /signin by your app logic.

Hit /api/auth/logout once (or add this logout button somewhere).

Or in DevTools → Application → Cookies → delete connect.sid.

Server catch-all shouldn’t rewrite /signin
Your Express static fallback should serve index.html—not redirect to /api/login.

app.use(express.static("dist"));
app.get("*", (_, res) =>
  res.sendFile(path.join(__dirname, "dist", "index.html"))
);

Minimal working setup (copy/paste)
Server
// Real login (no auto-login anywhere else)
app.post("/api/auth/login", async (req, res) => {
  const { email, password } = req.body || {};
  const user = email ? await storage.getUserByEmail(email) : null;
  if (!user || (user.password && password !== user.password)) {
    return res.status(401).json({ message: "Invalid credentials" });
  }
  req.session ??= {};
  req.session.user = { id: user.id, username: user.username, email: user.email };
  req.session.save(() => res.json({ ok: true }));
});

// Logout
app.post("/api/auth/logout", (req, res) => {
  if (!req.session) return res.json({ ok: true });
  req.session.destroy(() => {
    res.clearCookie("connect.sid");
    res.json({ ok: true });
  });
});

// Auth check
app.get("/api/auth/user", async (req, res) => {
  if (req.session?.user) {
    const user = await storage.getUser(req.session.user.id);
    if (user) return res.json(user);
  }
  res.status(401).json({ message: "Not authenticated" });
});

Client (CTA + SignIn)
// CTA
<Button asChild><Link href="/signin">Sign in</Link></Button>

// /signin page: NO redirects, just a form