<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mobile Debug Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .debug-info {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }
        .test-navbar {
            background: #1f2937;
            color: white;
            padding: 15px;
            text-align: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }
        .content {
            margin-top: 80px;
        }
        .big-button {
            background: #3b82f6;
            color: white;
            padding: 20px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            width: 100%;
            margin: 10px 0;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="test-navbar">
        üö® MOBILE DEBUG TEST - iPhone Check
    </div>
    
    <div class="content">
        <h1>Emergency Mobile Debug</h1>
        
        <div class="debug-info">
            <h3>üîç Device Info:</h3>
            <p id="userAgent"></p>
            <p id="screenSize"></p>
            <p id="viewportSize"></p>
        </div>
        
        <div class="debug-info">
            <h3>üì± Current URL:</h3>
            <p id="currentUrl"></p>
        </div>
        
        <div class="debug-info">
            <h3>üóÇÔ∏è Storage Check:</h3>
            <p id="storageInfo"></p>
        </div>
        
        <button class="big-button" onclick="clearEverything()">
            üóëÔ∏è EMERGENCY: Clear All Caches & Storage
        </button>
        
        <button class="big-button" onclick="goToMainSite()">
            üè† Go To Main Site (After Cache Clear)
        </button>
        
        <button class="big-button" onclick="testMainSiteInFrame()">
            üîç Test Main Site in Frame (Debug)
        </button>
        
        <div id="frameContainer" style="display: none; margin-top: 20px;">
            <h3>Main Site Preview:</h3>
            <iframe id="mainSiteFrame" src="/" style="width: 100%; height: 400px; border: 1px solid white;"></iframe>
        </div>
        
        <div class="debug-info">
            <h3>üìù Actions Log:</h3>
            <div id="actionLog"></div>
        </div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('actionLog');
            logDiv.innerHTML += '<p>' + new Date().toLocaleTimeString() + ': ' + message + '</p>';
        }
        
        // Display device info
        document.getElementById('userAgent').textContent = 'User Agent: ' + navigator.userAgent;
        document.getElementById('screenSize').textContent = 'Screen: ' + screen.width + 'x' + screen.height;
        document.getElementById('viewportSize').textContent = 'Viewport: ' + window.innerWidth + 'x' + window.innerHeight;
        document.getElementById('currentUrl').textContent = window.location.href;
        
        // Check storage
        let storageItems = [];
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            storageItems.push(key);
        }
        document.getElementById('storageInfo').textContent = 'LocalStorage items: ' + storageItems.join(', ');
        
        function clearEverything() {
            log('üö® Starting emergency cache clear...');
            
            // Clear localStorage
            try {
                localStorage.clear();
                log('‚úÖ Cleared localStorage');
            } catch (e) {
                log('‚ùå Failed to clear localStorage: ' + e.message);
            }
            
            // Clear sessionStorage
            try {
                sessionStorage.clear();
                log('‚úÖ Cleared sessionStorage');
            } catch (e) {
                log('‚ùå Failed to clear sessionStorage: ' + e.message);
            }
            
            // Clear caches
            if ('caches' in window) {
                caches.keys().then(function(names) {
                    names.forEach(function(name) {
                        caches.delete(name);
                        log('‚úÖ Cleared cache: ' + name);
                    });
                });
            } else {
                log('‚ö†Ô∏è Cache API not available');
            }
            
            // Force reload
            setTimeout(() => {
                log('üîÑ Forcing page reload...');
                window.location.reload(true);
            }, 2000);
        }
        
        function goToMainSite() {
            log('üè† Navigating to main site...');
            window.location.href = '/';
        }
        
        function testMainSiteInFrame() {
            log('üîç Testing main site in frame...');
            const container = document.getElementById('frameContainer');
            container.style.display = 'block';
            
            // Force reload the iframe
            const frame = document.getElementById('mainSiteFrame');
            frame.src = frame.src;
        }
        
        log('üì± Mobile debug page loaded successfully');
    </script>
</body>
</html>